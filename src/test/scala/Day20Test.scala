import org.junit.Test
import org.junit.Assert._

import utils._

class Day20Test {
  @Test def test(): Unit = {
    
    val map1 = List(
      "         A          ",
      "         A          ",
      "  #######.######### ",
      "  #######.........# ",
      "  #######.#######.# ",
      "  #######.#######.# ",
      "  #######.#######.# ",
      "  #####  B    ###.# ",
      "BC...##  C    ###.# ",
      "  ##.##       ###.# ",
      "  ##...DE  F  ###.# ",
      "  #####    G  ###.# ",
      "  #########.#####.# ",
      "DE..#######...###.# ",
      "  #.#########.###.# ",
      "FG..#########.....# ",
      "  ###########.##### ",
      "             Z      ",
      "             Z      ",
      )
    assertEquals(23, Day20.part1(map1))

    val map2 = List(
      "                   A               ",
      "                   A               ",
      "  #################.#############  ",
      "  #.#...#...................#.#.#  ",
      "  #.#.#.###.###.###.#########.#.#  ",
      "  #.#.#.......#...#.....#.#.#...#  ",
      "  #.#########.###.#####.#.#.###.#  ",
      "  #.............#.#.....#.......#  ",
      "  ###.###########.###.#####.#.#.#  ",
      "  #.....#        A   C    #.#.#.#  ",
      "  #######        S   P    #####.#  ",
      "  #.#...#                 #......VT",
      "  #.#.#.#                 #.#####  ",
      "  #...#.#               YN....#.#  ",
      "  #.###.#                 #####.#  ",
      "DI....#.#                 #.....#  ",
      "  #####.#                 #.###.#  ",
      "ZZ......#               QG....#..AS",
      "  ###.###                 #######  ",
      "JO..#.#.#                 #.....#  ",
      "  #.#.#.#                 ###.#.#  ",
      "  #...#..DI             BU....#..LF",
      "  #####.#                 #.#####  ",
      "YN......#               VT..#....QG",
      "  #.###.#                 #.###.#  ",
      "  #.#...#                 #.....#  ",
      "  ###.###    J L     J    #.#.###  ",
      "  #.....#    O F     P    #.#...#  ",
      "  #.###.#####.#.#####.#####.###.#  ",
      "  #...#.#.#...#.....#.....#.#...#  ",
      "  #.#####.###.###.#.#.#########.#  ",
      "  #...#.#.....#...#.#.#.#.....#.#  ",
      "  #.###.#####.###.###.#.#.#######  ",
      "  #.#.........#...#.............#  ",
      "  #########.###.###.#############  ",
      "           B   J   C               ",
      "           U   P   P               ",
      )
    assertEquals(58, Day20.part1(map2))

    val day20map = fromPuzzleInput(20)
    assertEquals(432, Day20.part1(day20map))


    assertEquals(26, Day20.part2(map1))
    val map3 = List(
      "             Z L X W       C                 ",
      "             Z P Q B       K                 ",
      "  ###########.#.#.#.#######.###############  ",
      "  #...#.......#.#.......#.#.......#.#.#...#  ",
      "  ###.#.#.#.#.#.#.#.###.#.#.#######.#.#.###  ",
      "  #.#...#.#.#...#.#.#...#...#...#.#.......#  ",
      "  #.###.#######.###.###.#.###.###.#.#######  ",
      "  #...#.......#.#...#...#.............#...#  ",
      "  #.#########.#######.#.#######.#######.###  ",
      "  #...#.#    F       R I       Z    #.#.#.#  ",
      "  #.###.#    D       E C       H    #.#.#.#  ",
      "  #.#...#                           #...#.#  ",
      "  #.###.#                           #.###.#  ",
      "  #.#....OA                       WB..#.#..ZH",
      "  #.###.#                           #.#.#.#  ",
      "CJ......#                           #.....#  ",
      "  #######                           #######  ",
      "  #.#....CK                         #......IC",
      "  #.###.#                           #.###.#  ",
      "  #.....#                           #...#.#  ",
      "  ###.###                           #.#.#.#  ",
      "XF....#.#                         RF..#.#.#  ",
      "  #####.#                           #######  ",
      "  #......CJ                       NM..#...#  ",
      "  ###.#.#                           #.###.#  ",
      "RE....#.#                           #......RF",
      "  ###.###        X   X       L      #.#.#.#  ",
      "  #.....#        F   Q       P      #.#.#.#  ",
      "  ###.###########.###.#######.#########.###  ",
      "  #.....#...#.....#.......#...#.....#.#...#  ",
      "  #####.#.###.#######.#######.###.###.#.#.#  ",
      "  #.......#.......#.#.#.#.#...#...#...#.#.#  ",
      "  #####.###.#####.#.#.#.#.###.###.#.###.###  ",
      "  #.......#.....#.#...#...............#...#  ",
      "  #############.#.#.###.###################  ",
      "               A O F   N                     ",
      "               A A D   M                     ",
      )

    assertEquals(396, Day20.part2(map3))

    assertEquals(5214, Day20.part2(day20map))
  }
}
